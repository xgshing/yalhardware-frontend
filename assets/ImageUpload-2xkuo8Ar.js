import{d as g,r as d,w as k,c,g as p,k as a,F as I,p as V,I as w,_ as y}from"./index-QDArsuHU.js";const C={class:"image-upload"},R={class:"upload-dropzone"},x=["multiple"],B={class:"preview-list"},U=["src"],b={class:"preview-mask"},L=["onClick"],$=g({__name:"ImageUpload",props:{modelValue:{},existingImages:{},multiple:{type:Boolean}},emits:["update:modelValue","remove-remote"],setup(m,{emit:v}){const u=m,i=v,l=d([]),s=d([]);k(()=>u.existingImages,t=>{if(!(l.value.length>0)){if(!t||t.length===0){s.value=[];return}s.value=t.map(e=>({key:`remote:${e}`,url:e,isRemote:!0}))}},{immediate:!0});function f(t){const e=t.target;if(!e.files)return;const o=Array.from(e.files);u.multiple||(s.value=[],l.value=[]),o.forEach(n=>{const r=URL.createObjectURL(n);s.value.push({key:`local:${r}`,url:r,file:n,isRemote:!1}),l.value.push(n)}),_(),e.value=""}function _(){u.multiple?i("update:modelValue",l.value):i("update:modelValue",l.value[0]??null)}function h(t){const e=s.value[t];e&&(s.value.splice(t,1),e.isRemote?(i("remove-remote",e.url),u.multiple||i("update:modelValue",null)):e.file&&(l.value=l.value.filter(o=>o!==e.file),i("update:modelValue",u.multiple?l.value:l.value[0]??null)))}return(t,e)=>(p(),c("div",C,[a("label",R,[a("input",{type:"file",accept:"image/*",multiple:m.multiple,class:"hidden-input",onChange:f},null,40,x),e[0]||(e[0]=a("div",{class:"upload-placeholder"},[a("span",{class:"plus"},"＋"),a("p",null,"点击或拖拽上传图片")],-1))]),a("div",B,[(p(!0),c(I,null,V(s.value,(o,n)=>(p(),c("div",{key:o.key,class:"preview-item"},[a("img",{src:o.url},null,8,U),a("div",b,[a("button",{onClick:w(r=>h(n),["stop"])},"删除",8,L)])]))),128))])]))}}),F=y($,[["__scopeId","data-v-0f7a2ffa"]]);export{F as I};
